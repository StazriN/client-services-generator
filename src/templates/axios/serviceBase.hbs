/*
* This file was automatically generated by client-services-generator.
*
* Please, keep in mind that if you make any changes and run generator again, all files will be erased and generate again.
*/

import axios, { AxiosRequestConfig } from 'axios';

export const baseUrls = [{{#each apiData.serverUrls as |url|}}'{{url}}',{{/each}}]

export const ServiceBase = axios.create({
    // by default is set to first base URL, if you have more endpoints change it to other
    baseURL: baseUrls[0],
});

/*
* You can externally set headers or other parts in this configuration
* for example for authentication
*/
export const customConfiguration: AxiosRequestConfig | undefined = undefined;

ServiceBase.interceptors.request.use(
    (config) => {
        if (customConfiguration !== undefined) {
            return customConfiguration;
        } else {
            return config;
        }
    },
    (error) => {
        return errorHandler(error);
    },
);

ServiceBase.interceptors.response.use(
    (response) => {
        return response;
    },
    (error) => {
        return errorHandler(error);
    },
);

export function errorHandler(error: any) {
    if (error.response) {
        // eslint-disable-next-line no-console
        console.log(error);
    } else {
        // eslint-disable-next-line no-console
        console.log('Network error!');
    }

    return Promise.reject(error);
}
